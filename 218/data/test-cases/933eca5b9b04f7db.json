{
  "uid" : "933eca5b9b04f7db",
  "name" : "test_light_nossl",
  "fullName" : "unittests.test_haclient.TestHaClient#test_light_nossl",
  "historyId" : "88e56a338df752467c83b977e74764c6",
  "time" : {
    "start" : 1634329887568,
    "stop" : 1634329887634,
    "duration" : 66
  },
  "description" : "Test base turn on/off behavior.\n         This need running HA session!\n        ",
  "descriptionHtml" : "<p>Test base turn on/off behavior.\nThis need running HA session!</p>\n",
  "status" : "failed",
  "statusMessage" : "AssertionError: {'id'[84 chars]: 100, 'attributes': {'supported_color_modes':[90 chars]: 1}} != {'id'[84 chars]: 100}\n- {'attributes': {'brightness': 80,\n-                 'friendly_name': 'unittest light',\n-                 'supported_color_modes': ['brightness'],\n-                 'supported_features': 1},\n-  'best_score': 100,\n? ^\n\n+ {'best_score': 100,\n? ^\n\n   'dev_name': 'unittest light',\n   'id': 'light.unittest_light',\n   'state': 'off'}",
  "statusTrace" : "self = <unittests.test_haclient.TestHaClient testMethod=test_light_nossl>\n\n    def test_light_nossl(self):\n        \"\"\"Test base turn on/off behavior.\n         This need running HA session!\n        \"\"\"\n        portnum = config['port_number']\n        ha_client = HomeAssistantClient(config)\n        component = ha_client.find_component('light')\n        entity = (ha_client.find_entity('unittest light', ['light']))\n        if entity['best_score'] >= 50:\n            print(entity['best_score'])\n            print(entity)\n        light_attr = ha_client.find_entity_attr(entity['id'])\n    \n        self.assertEqual(component, True)\n        self.assertEqual(light_attr['name'], 'unittest light')\n        self.assertEqual(entity['dev_name'], 'unittest light')\n        self.assertEqual(ha_client.ssl, False)\n        self.assertEqual(portnum, 8123)\n        # Conversation plugin not enabled in HA test instance\n        # convo = ha_client.engage_conversation('turn off Mycroft light')\n        # self.assertEqual(convo, {'extra_data': None, 'speech': 'Turned Mycroft light off'})\n        ha_data = {'entity_id': entity['id']}\n        if light_attr['state'] == 'on':\n            req = ha_client.execute_service(\"homeassistant\", \"turn_off\",\n                                            ha_data)\n            if req.status_code == 200:\n                entity = ha_client.find_entity(light_attr['name'], 'light')\n                if entity['state'] == 'off':\n                    self.assertEqual(entity,\n                                     {'id': 'light.unittest_light',\n                                      'dev_name': 'unittest light',\n                                      'state': 'off',\n>                                     'best_score': 100\n                                      }\n                                     )\nE                   AssertionError: {'id'[84 chars]: 100, 'attributes': {'supported_color_modes':[90 chars]: 1}} != {'id'[84 chars]: 100}\nE                   - {'attributes': {'brightness': 80,\nE                   -                 'friendly_name': 'unittest light',\nE                   -                 'supported_color_modes': ['brightness'],\nE                   -                 'supported_features': 1},\nE                   -  'best_score': 100,\nE                   ? ^\nE                   \nE                   + {'best_score': 100,\nE                   ? ^\nE                   \nE                      'dev_name': 'unittest light',\nE                      'id': 'light.unittest_light',\nE                      'state': 'off'}\n\nunittests/test_haclient.py:109: AssertionError",
  "flaky" : false,
  "newFailed" : false,
  "beforeStages" : [ {
    "name" : "_UnitTestCase__pytest_class_setup",
    "time" : {
      "start" : 1634329887540,
      "stop" : 1634329887540,
      "duration" : 0
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  } ],
  "testStage" : {
    "description" : "Test base turn on/off behavior.\n         This need running HA session!\n        ",
    "status" : "failed",
    "statusMessage" : "AssertionError: {'id'[84 chars]: 100, 'attributes': {'supported_color_modes':[90 chars]: 1}} != {'id'[84 chars]: 100}\n- {'attributes': {'brightness': 80,\n-                 'friendly_name': 'unittest light',\n-                 'supported_color_modes': ['brightness'],\n-                 'supported_features': 1},\n-  'best_score': 100,\n? ^\n\n+ {'best_score': 100,\n? ^\n\n   'dev_name': 'unittest light',\n   'id': 'light.unittest_light',\n   'state': 'off'}",
    "statusTrace" : "self = <unittests.test_haclient.TestHaClient testMethod=test_light_nossl>\n\n    def test_light_nossl(self):\n        \"\"\"Test base turn on/off behavior.\n         This need running HA session!\n        \"\"\"\n        portnum = config['port_number']\n        ha_client = HomeAssistantClient(config)\n        component = ha_client.find_component('light')\n        entity = (ha_client.find_entity('unittest light', ['light']))\n        if entity['best_score'] >= 50:\n            print(entity['best_score'])\n            print(entity)\n        light_attr = ha_client.find_entity_attr(entity['id'])\n    \n        self.assertEqual(component, True)\n        self.assertEqual(light_attr['name'], 'unittest light')\n        self.assertEqual(entity['dev_name'], 'unittest light')\n        self.assertEqual(ha_client.ssl, False)\n        self.assertEqual(portnum, 8123)\n        # Conversation plugin not enabled in HA test instance\n        # convo = ha_client.engage_conversation('turn off Mycroft light')\n        # self.assertEqual(convo, {'extra_data': None, 'speech': 'Turned Mycroft light off'})\n        ha_data = {'entity_id': entity['id']}\n        if light_attr['state'] == 'on':\n            req = ha_client.execute_service(\"homeassistant\", \"turn_off\",\n                                            ha_data)\n            if req.status_code == 200:\n                entity = ha_client.find_entity(light_attr['name'], 'light')\n                if entity['state'] == 'off':\n                    self.assertEqual(entity,\n                                     {'id': 'light.unittest_light',\n                                      'dev_name': 'unittest light',\n                                      'state': 'off',\n>                                     'best_score': 100\n                                      }\n                                     )\nE                   AssertionError: {'id'[84 chars]: 100, 'attributes': {'supported_color_modes':[90 chars]: 1}} != {'id'[84 chars]: 100}\nE                   - {'attributes': {'brightness': 80,\nE                   -                 'friendly_name': 'unittest light',\nE                   -                 'supported_color_modes': ['brightness'],\nE                   -                 'supported_features': 1},\nE                   -  'best_score': 100,\nE                   ? ^\nE                   \nE                   + {'best_score': 100,\nE                   ? ^\nE                   \nE                      'dev_name': 'unittest light',\nE                      'id': 'light.unittest_light',\nE                      'state': 'off'}\n\nunittests/test_haclient.py:109: AssertionError",
    "steps" : [ ],
    "attachments" : [ {
      "uid" : "bb39bbe8b349bd84",
      "name" : "stdout",
      "source" : "bb39bbe8b349bd84.txt",
      "type" : "text/plain",
      "size" : 262
    } ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 1,
    "shouldDisplayMessage" : true,
    "hasContent" : true
  },
  "afterStages" : [ {
    "name" : "_UnitTestCase__pytest_class_setup::0",
    "time" : {
      "start" : 1634329887757,
      "stop" : 1634329887758,
      "duration" : 1
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  } ],
  "labels" : [ {
    "name" : "parentSuite",
    "value" : "unittests"
  }, {
    "name" : "suite",
    "value" : "test_haclient"
  }, {
    "name" : "subSuite",
    "value" : "TestHaClient"
  }, {
    "name" : "host",
    "value" : "fv-az82-24"
  }, {
    "name" : "thread",
    "value" : "6853-MainThread"
  }, {
    "name" : "framework",
    "value" : "pytest"
  }, {
    "name" : "language",
    "value" : "cpython3"
  }, {
    "name" : "package",
    "value" : "unittests.test_haclient"
  }, {
    "name" : "resultFormat",
    "value" : "allure2"
  } ],
  "parameters" : [ ],
  "links" : [ ],
  "hidden" : false,
  "retry" : false,
  "extra" : {
    "severity" : "normal",
    "retries" : [ ],
    "categories" : [ {
      "name" : "Product defects",
      "matchedStatuses" : [ ],
      "flaky" : false
    } ],
    "tags" : [ ]
  },
  "source" : "933eca5b9b04f7db.json",
  "parameterValues" : [ ]
}